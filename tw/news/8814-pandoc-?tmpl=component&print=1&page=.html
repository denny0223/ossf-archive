	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-tw" lang="zh-tw" >
		<head>
			  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="keywords" content="OSSFNL806" />
  <meta name="title" content="Pandoc 用命令行轉換標記語言！" />
  <meta name="description" content="軟體名稱：Pandoc介紹版本：1.9.2官網：https://johnma c farlane.net/pandoc/授權：GPL-3.0 簡介 P andoc 是一款命令行轉檔軟體。不過和一般人對轉 檔軟體的印象不同，它所轉換的對象不是影片，而是標記語言。 Pandoc 能將 Markdown、reStructuredText、textile、HTML、DocBook、LaTeX" />
  <meta name="generator" content="" />
  <title>Pandoc 用命令行轉換標記語言！</title>
  <link href="../../favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <link rel="stylesheet" href="../../components/com_gantry/css/gantry.css" type="text/css" />
  <link rel="stylesheet" href="../../components/com_gantry/css/grid-12.css" type="text/css" />
  <link rel="stylesheet" href="../../components/com_gantry/css/joomla.css" type="text/css" />
  <link rel="stylesheet" href="../../templates/rt_quantive_j15/css/joomla.css" type="text/css" />
  <link rel="stylesheet" href="../../templates/rt_quantive_j15/css/style1.css" type="text/css" />
  <link rel="stylesheet" href="../../templates/rt_quantive_j15/css/light-body.css" type="text/css" />
  <link rel="stylesheet" href="../../templates/rt_quantive_j15/css/demo-styles.css" type="text/css" />
  <link rel="stylesheet" href="../../templates/rt_quantive_j15/css/template.css" type="text/css" />
  <link rel="stylesheet" href="../../templates/rt_quantive_j15/css/typography.css" type="text/css" />
  <style type="text/css">
    <!--
#rt-main-surround ul.menu li.active > a, #rt-main-surround ul.menu li.active > .separator, #rt-main-surround ul.menu li.active > .item, #rt-main-surround .square4 ul.menu li:hover > a, #rt-main-surround .square4 ul.menu li:hover > .item, #rt-main-surround .square4 ul.menu li:hover > .separator, .roktabs-links ul li.active span {color:#0088B5;}
a, #rt-main-surround ul.menu a:hover, #rt-main-surround ul.menu .separator:hover, #rt-main-surround ul.menu .item:hover {color:#0088B5;}
    -->
  </style>
  <script type="text/javascript" src="../../components/com_jcomments/js/jcomments-v2.1.js%3Fv=2"></script>
  <script type="text/javascript" src="../../components/com_jcomments/libraries/joomlatune/ajax.js"></script>
  <script type="text/javascript" src="../../media/system/js/mootools.js"></script>
  <script type="text/javascript" src="../../media/system/js/caption.js"></script>
  <script type="text/javascript" src="../../components/com_gantry/js/gantry-buildspans.js"></script>
  <script type="text/javascript" src="../../components/com_gantry/js/gantry-inputs.js"></script>
  <script type="text/javascript">

			window.addEvent('domready', function() {
				var modules = ['rt-block'];
				var header = ['h3','h2','h1'];
				GantryBuildSpans(modules, header);
			});
		InputsExclusion.push('.content_vote','#rt-popup')
  </script>
		</head>
		<body  class="backgroundlevel-low backgroundstyle-style8 bodylevel-med bodystyle-light cssstyle-style1 logostyle-dark font-family-helvetica font-size-is-default menu-type-fusionmenu col12 ">
			<div id="rt-main-surround">
				<div class="rt-container">
					<div class="rt-block">
						<div id="rt-mainbody">
					    	
<div class="rt-joomla ">
	<div class="rt-article">
		
				<div class="rt-headline"><h1 class="rt-article-title">Pandoc 用命令行轉換標記語言！</h1>		</div>
		<div class="clear"></div>
		
		
		
				<div class="rt-articleinfo">
						<div class="rt-article-icons">
				<a href="8814-pandoc-%3Ftmpl=component&amp;print=1&amp;page=.html#" onclick="window.print();return false;"><span class="icon print"></span></a>									<span class="icon printscreen">
						<a href="8814-pandoc-%3Ftmpl=component&amp;print=1&amp;page=.html#" onclick="window.print();return false;"><img src="../../images/M_images/printButton.png" alt="列印"  /></a>					</span>
							</div>
			
			<span class="rt-date-posted">
						建立日期			2012-09-25 15:19						&nbsp;&nbsp;&nbsp;&nbsp;						最近更新在 2012-10-09 15:34						</span>

						<span class="rt-author">
				作者是 林雪凡			</span>
				
					</div>
		
		
		軟體名稱：Pandoc<br />介紹版本：1.9.2<br />官網：<a href="https://johnmacfarlane.net/pandoc/">https://johnmacfarlane.net/pandoc/</a><br />授權：GPL-3.0<br /><br />
<h2>簡介</h2>
<p>Pandoc 是一款命令行轉檔軟體。不過和一般人對轉檔軟體的印象不同，它所轉換的對象不是影片，而是標記語言。</p>
<p>Pandoc 能將 Markdown、reStructuredText、textile、HTML、DocBook、LaTeX 格式轉換為……</p>
<ol class="arabic simple">
<li>基於 HTML 的標記語言：包括 XHTML、HTML、S5 幻燈片。</li>
<li>文書編輯格式：包括 docs、odt。</li>
<li>Epub 電子書。</li>
<li>LaTeX 格式。透過 LaTeX 格式還可以進一步轉為 PDF 格式。</li>
<li>許多輕量級標記語言，包括：Markdown、reStructuredText、AsciiDoc、Mediawiki、Textile 與 Emacs Org-Mode。</li>
</ol><br />
<h2>安裝說明</h2>
<p>Windows 與 Mac OS X 使用者，請從下面的網頁下載安裝： <a href="https://code.google.com/p/pandoc/downloads/list" target="_blank">https://code.google.com/p/pandoc/downloads/list</a></p>
<p>至於 Linux 與 BSD 使用者，請檢查您的套件庫，從套件庫安裝即可。倘若套件庫版本過舊，官網也有提供使用源碼包安裝的方式。詳情請參看這頁： <a href="https://johnmacfarlane.net/pandoc/installing.html">https://johnmacfarlane.net/pandoc/installing.html<br /></a></p>
<br />
<h2>使用說明</h2>
<p>前面說過了，Pandoc 是款命令行軟體，所以請打開終端機，咱們開始下指令吧。</p>
<h3>基本指令下法</h3>
<p>先看下面這行：</p>
<pre>pandoc demo.rst -o demo.md</pre>
<p>這就是最簡單的 Pandoc 用法。</p>
<p><code>pandoc</code> 是 Pandoc 的主程式，Pandoc 的所有操作都是透過這個程式執行的。<code>demo.rst</code> 指定了轉檔時的輸入檔案，<code>-o demo.md</code> 則是輸出檔案。如果不用 <code>-o</code> 參數指定輸出檔名，Pandoc 就會直接將結果輸出到標準輸出上（一般說來，這是指終端機上）。</p>
<p>Pandoc 會透過副檔名，自動判斷輸入與輸出的檔案格式。像上面那一行，輸入檔案會被自動視為 <a href="https://docutils.sourceforge.net/docs/user/rst/quickref.html" target="_blank">reStructuredText</a> 而輸出檔案則會被自動視為 <a href="https://markdown.tw/" target="_blank">markdown</a>。</p>
<p>您也可以透過 -f 與 -t 參數強制指定輸入與輸出的格式，比方說：</p>
<pre>pandoc demo.txt -o output.txt -f markdown -t html</pre>
<p>以上這句指令，會將輸入檔案「demo.txt」視為 markdown 格式，並將它轉為 html 格式後，存到 output.txt 位置上。</p>
<p>-f、-t 後面可接哪些格式名稱？請參看這裡： <a href="https://johnmacfarlane.net/pandoc/README.html#general-options">https://johnmacfarlane.net/pandoc/README.html#general-options<br /></a></p>
<br />
<h3>產生 PDF</h3>
<p>在 Pandoc 支援的格式中，想用 Pandoc 產生 pdf 檔又多了幾個小撇步，讓我試好久，請聽我說明解釋。</p>
<p>pandoc 的 PDF 產生功能是透過 LaTeX 來做的，所以除了主程式外，使用前還得先裝別的外掛程式。在 Linux 上，這個程式就是 texlive 包，請自行抓來裝。如果光裝 texlive 包 Pandoc 轉 pdf 時還是跑不起來，就將 texlive-cjk 包和 texlive-xetex 包也裝上，這樣就該沒問題了。</p>
<p>兩個包合計將近 500 MB，真是夠大的……</p>
<p>裝好了之後，就請立刻執行看看吧：</p>
<pre>pandoc demo.rst -o demo.pdf</pre>
<p>若您的 demo.rst 是純英文的，照上面操作就可以順利產生 pdf 檔案了。然而如果原始文件檔中含有其他字元（比方說中文字），執行之後 pdf 產生不出來，反而會吐出「Undefined control sequence」如何如何的錯誤訊息，這是因為預設的 latex 引擎不支援中文的緣故。</p>
<p>為了解決這個問題，必須改用能支援 Unicode 的 xelatex 引擎。</p>
<p>此外預設的字型也不包括中文，為了順利顯示，這邊還需要另外指定中文字型。總之就是下面這行（指定的字型是文泉驛微米黑，您可以替換成您希望的。請記得用英文名稱）：</p>
<pre>pandoc demo.rst -o demo.pdf --latex-engine=xelatex -V mainfont="WenQuanYi Micro Hei"</pre>
<p>如此一來就能順利產生出中文的 pdf 檔案了。</p>
<p>不過，儘管順利產生了 pdf，但某些問題依然存在（比方說中文的 line break），這些東西必須透過校調模版才能解決。接下來筆者會介紹一下 Pandoc 的模版，但關於如何用 XeTeX 設定中文 pdf 文件已經超出本文範圍，網路上有很多這方面資料，個人推荐新手參考這一頁來修改模版：<a href="https://electronic-blue.wikidot.com/doc:xetex" target="_blank">https://electronic-blue.wikidot.com/doc:xetex</a></p>
<br />
<h3>使用模版 (template)</h3>
<p>模版 (template) 是用來告訴 Pandoc，它應該要用什麼格式來產生目的檔案用的。</p>
<p>說得更具體一點：字型如何？字要多大？頁面寬度多寬？加重語氣時要用黑體還是斜體？……這些都有賴模版進行設定。</p>
<p>不同的目標檔案格式，其模版的基本格式也不一樣。比方說 html 的模版就會是 CSS 與 html 的混合，latex 就是 .tex 格式……諸如此類。此外，模版中還會混有 pandoc 專屬的內部程式碼。</p>
<p>嗯……這樣說好像很複雜。不過只要擁有相應格式的撰寫經驗，修改預設模版其實並不難，試試看就知道了。但第一步，您要先找到這些模版被放在哪裡。</p>
<p>在我的 (Linux) 電腦上，預設模版被堆放在這個位置：</p>
<pre>/usr/share/pandoc-1.9.2/templates</pre>
<p>您也可以用以下指令叫出某格式的模版，來閱讀或另存：</p>
<p><code>pandoc -D html | less #</code> 閱讀 html 格式的模版</p>
<p><code>pandoc -D html > mytemplate.txt #</code> 另存到 <code>mytemplate.txt</code> 中</p>
<p>得到範本後，就可以依樣畫葫蘆地修改他們了。</p>
<p>怎麼修改等會兒再說。總之，當您將模版修改好後，就可以透過 --template 參數套用它。如同下面這行：</p>
<pre>pandoc demo.rst -o demo.html --template=mytemplate.txt</pre>
<p>您可以用模版功能來進行絕大多數的格式自定義，自由度相當高。至於少部份無法透過模版架構進行自訂的東西，在 Pandoc 指令後方往往也能追加一些特殊參數來處理。具體有哪些參數可用，還請參看官網的參數列表：<a href="https://johnmacfarlane.net/pandoc/README.html#options" target="_blank">https://johnmacfarlane.net/pandoc/README.html#options</a></p>
<br />
<h3>定義與修改模版</h3>
<p>如果您剛剛試著看過任何一個 Pandoc 模版，這時恐怕正感到頭暈，因為模版裡面堆滿了錢……不，應該說是「$」符號。這些「$」符號被兩兩成對地運用著，像我們平常使用括號那樣夾著某些東西。</p>
<p>這就是 Pandoc 所使用的模版巨集語句！包括以下幾種：</p>
<p>1. if 判斷→ $if（變數名）$　$else$　$endif$</p>
<ul type="circle">
<li>如果變數有被指定，則 $if（變數名）$ 後的內容會被實際寫入檔案中。反之，如果變數沒被指定，則 $else$ 後面的內容會被寫入。判斷式的最後需用 $endif$ 收尾。</li>
</ul>
<br />
<p>2. for 迴圈→ $for（變數名）$　$endfor$</p>
<ul type="circle">
<li>運用在多值變數上。會重複寫入 $for（變數名）$ 與 $endfor$ 之間的內容。變數有多少個值就會重複寫入幾次。</li>
</ul>
<br />
<p>3. 變數→ $變數名$</p>
<ul type="circle">
<li>會被替換為指定的變數值。</li>
<li>變數名可以自己取，比方說取為 largefontsize 等等。</li>
</ul>
<br />
<p>有這些東西就能玩出很多花樣了，比方說：</p>
<pre>$if(largefontsize)$ font-size: $largefontsize$; $endif$</pre>
<p>這行表示，當使用者有指定 largefontsize 時，才將 font-size: $largefontsize$; 這行寫入 CSS 中……哎，可玩的東西很多啦。</p>
<p>說了那麼多，那麼該如何將變數具體指定為某個值呢？</p>
<p>我們回來看看 pdf 篇最後的範例：</p>
<pre>pandoc demo.rst -o demo.pdf --latex-engine=xelatex -V mainfont="WenQuanYi Micro Hei"</pre>
<p>這行中，「-V mainfont=...」也可以寫成「--veriable mainfont=...」。更直接點說，這段指令將一個名叫 mainfont 的變數，設定為 "WenQuanYi Micro Hei" 的值……</p>
<p>這樣應該完全理解了吧？變數就是如此了。</p>
<p>您可以看看官方說明 (<a href="https://johnmacfarlane.net/pandoc/README.html#templates" target="_blank">https://johnmacfarlane.net/pandoc/README.html#templates</a>)，內容和我這邊寫的差不多；不過下面多了些常見變數的命名與介紹，那些東西我就不費事重複了，需要變數資料的人請自己查一下。</p>
<br />
<h3>瑕疵與繞過</h3>
<p>Pandoc 轉檔很方便，但程式本身還是有些問題。至少在筆者的經驗中，1.9.2 版透過命令行輸入時，若輸入的字串中包含任何非英文字元，就會報錯。</p>
<p>但這並不是 Pandoc 內部不能處理非英文路徑，而似乎是 Pandoc 的「命令行介面」不能傳入非英文字元，這理由在下也搞不清楚。</p>
<p>如果不幸碰上，稍微更名一下就能將它給繞過了。</p>
<br />
<h3>深入閱讀</h3>
<p>以下是推荐的閱讀清單。</p>
<ol style="list-style-type: decimal;">
<li>支援的轉檔格式表，用一張大圖表示：<br /><a href="https://johnmacfarlane.net/pandoc/diagram.png" target="_blank">https://johnmacfarlane.net/pandoc/diagram.png</a></li>
<li>經 Pandoc 擴充後的 Markdown 格式手冊：<br /><a href="https://johnmacfarlane.net/pandoc/README.html#pandocs-markdown" target="_blank">https://johnmacfarlane.net/pandoc/README.html#pandocs-markdown</a>。Pandoc 的 Markdown 格式並不「官方」，這份自行擴充後的 Markdown，顯然被 Pandoc 作者視為得意特色，語法說明書長度比起 Pandoc 其他部份的說明全部加起來都還要多（笑）。</li>
<li>Pandoc 參數說明：<br /><a href="https://johnmacfarlane.net/pandoc/README.html#options" target="_blank">https://johnmacfarlane.net/pandoc/README.html#options</a></li>
<li>Pandoc 指令範例：<br /><a href="https://johnmacfarlane.net/pandoc/demos.html" target="_blank">https://johnmacfarlane.net/pandoc/demos.html</a></li>
</ol>
			<!-- Show relate article -->
				<!-- end -->
		<div class="article_note">
		<!-- Add tags use metakey, and show OSSF Newsletter tag: OSSFNL+NUM-->
		<br><br> <hr style='border: 1px dashed #D2DADB;'><b>自由軟體鑄造場電子報&nbsp;:</b>&nbsp;<a href='../../previous-issue%3Ftask=view&amp;id=806.html'>第 205 期 3D 除錯新視界：xDIVA 專案報導</a><br>				<!-- End -->
					<br>
					<b>分類: </b><a href="../foss-programs.html">				源碼秘技					</a>				</div>
			 <!-- AddThis Button BEGIN ID 3001 is the front page article -->
     			<br><br>
       <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
       <a class="addthis_button_preferred_1"></a>
       <a class="addthis_button_preferred_2"></a>
       <a class="addthis_button_preferred_3"></a>
       <a class="addthis_button_preferred_4"></a>
       <a class="addthis_button_compact"></a>
       <a class="addthis_counter addthis_bubble_style"></a>
       </div>
       <script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
       <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=openfoundry"></script>
       <!-- AddThis Button END -->
     <br>
		<div class="totop" ><a class="rt-totop" href="8814-pandoc-%3Ftmpl=component&amp;print=1&amp;page=.html#" style="outline: medium none;">↑ Top</a></div>
            <!-- AddThis Button END -->

			</div>
</div>

						</div>
					</div>
				</div>
			</div>
		</body>
	</html>
